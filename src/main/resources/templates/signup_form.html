<!DOCTYPE html>
<html layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/signup.css">
</head>

<body>
<div layout:fragment="content" class="container my-3">

    <!--백업용 로그인 폼(DB 연결, 수정 필요)-->
    <div class="join-box">
        <p class="logo-text">뭐하지 또? 또 가지 뭐!</p>
        <h1>회원가입</h1>
        <!-- 회원가입 폼 -->
        <form th:action="@{/user/signup}" th:object="${userCreateForm}" method="post">
            <div th:replace="~{form_errors :: formErrorsFragment}"></div>
            <div class="form-box">
                <div class="join-icon-box">
                    <i class="id fa-regular fa-user"></i>
                    <input type="text" th:field="*{username}" placeholder="아이디를 입력하세요" class="id-box">
                </div>
                <div class="join-icon-box">
                    <i class="ps fa-solid fa-key"></i>
                    <input type="password" th:field="*{password1}" placeholder="비밀번호를 입력하세요" class="pass-box">
                </div>
                <div class="join-icon-box">
                    <i class="ps fa-solid fa-key"></i>
                    <input type="password" th:field="*{password2}" placeholder="비밀번호를 입력하세요" class="pass-box">
                </div>
                <div class="join-icon-box">
                    <i class="name fa-regular fa-user"></i>
                    <input type="text" th:field="*{name}" placeholder="이름을 입력하세요" class="name-box">
                </div>
                <div class="join-icon-box">
                    <i class="name fa-regular fa-circle-user"></i>
                    <input type="text" th:field="*{nickname}" placeholder="닉네임을 입력하세요" class="niname-box">
                </div>
                <div class="join-icon-box">
                    <i class="name fa-solid fa-heart"></i>
                    <input type="text" th:field="*{birthdate}" placeholder="생년월일을 입력하세요" class="bir-box">
                </div>
                <div class="join-icon-box">
                    <i class="name fa-solid fa-phone-volume"></i>
                    <select name="통신사" id="통신사">
                        <option value="" selected>통신사 선택</option>
                        <option value="KT">KT</option>
                        <option value="LGU+">LGU+</option>
                        <option value="SKT">SKT</option>
                    </select>
                </div>
                <div class="join-icon-box">
                    <i class="name fa-solid fa-tablet-screen-button"></i>
                    <input type="text" th:field="*{phone}" placeholder="전화번호" class="phone-box">
                </div>
                <button type="submit" class="submit">회원가입하기</button>
            </div>
        </form>
        <p class="text">
            <input type="checkbox" class="agree-box"> 개인정보 수집 및 이용 내용을 확인하였으며, 동의합니다.
        </p>
    </div>

    <!-- 인증번호 요청 스크립트 -->
    <script>
        function generateVerificationCode() {
            const codeLength = 6;
            const min = Math.pow(10, codeLength - 1);
            const max = Math.pow(10, codeLength) - 1;
            const randomCode = Math.floor(Math.random() * (max - min + 1)) + min;

            return randomCode.toString().padStart(codeLength, '0');
        }

        $(document).ready(function() {
            $('#requestCodeBtn').click(function() {
                const verificationCode = generateVerificationCode();
                $('#verificationCode').text('인증번호: ' + verificationCode);
            });
        });

        /* 인증번호 요청 버튼 클릭시 새로고침 현상 막기 */
        $(document).ready(function() {
            $('#requestCodeBtn').click(function(event) {
                event.preventDefault(); // 기본 동작 막기

                const verificationCode = generateVerificationCode();
                $('#verificationCode').text('인증번호: ' + verificationCode);
            });
        });
    </script>
</div>
</body>
</html>